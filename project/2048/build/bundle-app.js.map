{"version":3,"sources":["webpack:///(webpack)/hot/dev-server.js","webpack:///./app/app.js","webpack:///(webpack)/hot/log-apply-result.js","webpack:///./app/appView.js","webpack:///./app/router.js","webpack:///./app/module/start/startView.js","webpack:///./app/module/header/headerView.js","webpack:///./app/module/header/headerModel.js","webpack:///./app/module/main/gridsCollection.js","webpack:///./app/module/main/mainView.js","webpack:///./app/module/start/start.ejs","webpack:///./app/module/header/header.ejs","webpack:///./app/module/grid/gridModel.js","webpack:///./app/module/main/main.ejs","webpack:///./app/module/grid/gridView.js","webpack:///./app/module/game_over/gameOverView.js","webpack:///./app/module/grid/grid.ejs","webpack:///./app/module/game_over/gameOver.ejs"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,eAAe;AAC9C;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA,EAAC;AACD;AACA;;;;;;;AC1DA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA,oBAAmB,sBAAsB;AACzC,qBAAoB,yBAAyB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B,GAAG;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,oCAAmC;AACnC;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA,mBAAkB;AAClB,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA,OAAM;AACN,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,SAAQ;AACR;AACA;AACA;AACA,sBAAqB,YAAY;AACjC;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,WAAU;AACV;AACA;AACA;AACA,sBAAqB,YAAY;AACjC;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA,IAAG;;;;;;;;;;ACpRH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,IAAG;AACH;AACA;;;;;;;ACxBA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA,4EAA2E,iBAAiB;AAC5F;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,wCAAuC,OAAO;AAC9C;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED,0B;;;;;;ACpIA;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAC;;AAED,4B;;;;;;AClBA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,EAAC;;AAED,4B;;;;;;ACjBA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,IAAG;;AAEH;AACA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI,GAAG,aAAa;AACpB;;AAEA;;AAEA;AACA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAC;;AAED,6B;;;;;;ACjDA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,EAAC;;AAED,8B;;;;;;ACjBA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,gDAA+C,QAAQ;AACvD,iDAAgD,QAAQ;;AAExD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gDAA+C,QAAQ;;AAEvD;AACA;AACA;AACA;AACA;;AAEA;AACA,gDAA+C,QAAQ;;AAEvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA0C,QAAQ;AAClD,4CAA2C,QAAQ;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,kBAAiB,OAAO;AACxB;AACA;;AAEA;AACA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6CAA4C,QAAQ;AACpD;AACA,8CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6CAA4C,QAAQ;AACpD;AACA,0CAAyC,QAAQ;AACjD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6CAA4C,QAAQ;AACpD;AACA,8CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6CAA4C,QAAQ;AACpD;AACA,0CAAyC,QAAQ;AACjD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,MAAK;AACL,KAAI;;AAEJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAqB,eAAe;AACpC;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA,sBAAqB,eAAe;AACpC;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA,sBAAqB,eAAe;AACpC;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA,sBAAqB,eAAe;AACpC;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED,kC;;;;;;ACxbA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,IAAG;;AAEH;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,K;;;;;;AC3OA;AACA,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;ACRA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;ACdA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED,4B;;;;;;ACxBA;AACA,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;ACRA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED,2B;;;;;;AC3DA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA,EAAC;;AAED,+B;;;;;;ACnCA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;AChBA;AACA,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,E","file":"bundle-app.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nif(module.hot) {\r\n\tvar lastData;\r\n\tvar upToDate = function upToDate() {\r\n\t\treturn lastData.indexOf(__webpack_hash__) >= 0;\r\n\t};\r\n\tvar check = function check() {\r\n\t\tmodule.hot.check(true, function(err, updatedModules) {\r\n\t\t\tif(err) {\r\n\t\t\t\tif(module.hot.status() in {abort:1,fail:1}) {\r\n\t\t\t\t\tconsole.warn(\"[HMR] Cannot apply update. Need to do a full reload!\");\r\n\t\t\t\t\tconsole.warn(\"[HMR] \" + err.stack || err.message);\r\n\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.warn(\"[HMR] Update failed: \" + err.stack || err.message);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!updatedModules) {\r\n\t\t\t\tconsole.warn(\"[HMR] Cannot find update. Need to do a full reload!\");\r\n\t\t\t\tconsole.warn(\"[HMR] (Probably because of restarting the webpack-dev-server)\")\r\n\t\t\t\twindow.location.reload();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!upToDate()) {\r\n\t\t\t\tcheck();\r\n\t\t\t}\r\n\r\n\t\t\trequire(\"./log-apply-result\")(updatedModules, updatedModules);\r\n\r\n\t\t\tif(upToDate()) {\r\n\t\t\t\tconsole.log(\"[HMR] App is up to date.\");\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t};\r\n\tvar addEventListener = window.addEventListener ? function(eventName, listener) {\r\n\t\twindow.addEventListener(eventName, listener, false);\r\n\t} : function (eventName, listener) {\r\n\t\twindow.attachEvent('on' + eventName, listener);\r\n\t};\r\n\taddEventListener(\"message\", function(event) {\r\n\t\tif(typeof event.data === \"string\" && event.data.indexOf(\"webpackHotUpdate\") === 0) {\r\n\t\t\tlastData = event.data;\r\n\t\t\tif(!upToDate() && module.hot.status() === \"idle\") {\r\n\t\t\t\tconsole.log(\"[HMR] Checking for updates on the server...\");\r\n\t\t\t\tcheck();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\tconsole.log(\"[HMR] Waiting for update signal from WDS...\");\r\n} else {\r\n\tthrow new Error(\"[HMR] Hot Module Replacement is disabled.\");\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/hot/dev-server.js\n ** module id = 1\n ** module chunks = 1\n **/","var $ = require('jquery');\n\n$(document).ready(function () {\n\tvar Backbone = require('backbone');\n\n\tvar app = app || {};\n\t// 设置全局应用程序对象，以后被其它模块使用\n\twindow.GAME_APP = app;\n\n\tvar AppView = require('./appView');\n\tapp.appView = new AppView();\n\n\tvar AppRouter = require('./router');\n\tvar appRouter = new AppRouter();\n\tBackbone.history.start();\n\n});\n\n//var $ = require('jquery');\n//\n//$(document).ready(function () {\n//\tvar audioEle = $(\".love-block audio\")[0];\n//\t$(\".love-block .audio-btn\").on(\"touchend\", function () {\n//\t\tvar $this = $(this);\n//\t\tif ($this.hasClass(\"music-on\")) {\n//\t\t\t$this.removeClass(\"music-on\").addClass(\"music-off\");\n//\t\t\taudioEle.pause();\n//\t\t} else {\n//\t\t\t$this.addClass(\"music-on\").removeClass(\"music-off\");\n//\t\t\taudioEle.play();\n//\t\t}\n//\n//\t});\n//\n//\t$(\".love-block .audio-btn\").trigger(\"touchend\");\n//\taudioEle.pause();\n//\tsetTimeout(function () {\n//\t\t$(\".love-block .audio-btn\").trigger(\"touchend\");\n//\t}, 100);\n\n//\tfunction isShowLove() {\n//\t\tfor (var i = 0; i < blockData.length; i++) {\n//\t\t\tfor (var j = 0; j < blockData[0].length; j++) {\n//\t\t\t\tif (blockData[i][j] == 8) {\n//\t\t\t\t\treturn true;\n//\t\t\t\t}\n//\t\t\t}\n//\t\t\t;\n//\t\t}\n//\t\t;\n//\t\treturn false;\n//\t}\n//\n//\n//\tfunction showLoveBlock() {\n//\t\t$(\".love-block .audio-btn\").trigger(\"touchend\");\n//\n//\t\t$(\"#love-block\").css(\"height\", window.innerHeight - 120);\n//\t\t//打印字符函数\n//\t\t$.fn.autotype = function () {\n//\t\t\tvar _this = $(this);\n//\t\t\tvar str = _this.html();\n//\t\t\t// 正则替换代码行之间添加的多个空格，不去除换行输出会有明显的停顿：实际是在输出多个空格\n//\t\t\tstr = str.replace(/(\\s){2,}/g, \"$1\");\n//\t\t\tvar index = 0;\n//\t\t\t$(this).html('');\n//\t\t\tvar timer = function () {\n//\t\t\t\tvar args = arguments;\n//\t\t\t\tvar current = str.slice(index, index + 1);\n//\t\t\t\t// html标签完整输出,如：<p>\n//\t\t\t\tif (current == '<') {\n//\t\t\t\t\tindex = str.indexOf('>', index) + 1;\n//\t\t\t\t} else {\n//\t\t\t\t\tindex++;\n//\t\t\t\t}\n//\t\t\t\t//位运算符: 根据setInterval运行奇偶次来判断是否加入下划线字符“_”，使输入效果更逼真\n//\t\t\t\tif (index < str.length - 1) { //打印字符倒数第2个字符开始，不加下划线字符，以防止结束符可能会多输出一下划线字符\n//\t\t\t\t\t_this.html(str.substring(0, index) + (index & 1 ? '_' : ''));\n//\t\t\t\t} else {\n//\t\t\t\t\t_this.html(str.substring(0, index));\n//\t\t\t\t\t// clearTimeout(timer);\n//\t\t\t\t\tclearInterval(timerInterval);\n//\t\t\t\t}\n//\t\t\t\t;\n//\t\t\t};\n//\t\t\tvar timerInterval = setInterval(timer, 150);\n//\n//\t\t\t// 延迟1s开始\n//\t\t\tsetTimeout(timer, 1000);\n//\t\t\t// timer();\n//\t\t};\n//\t\t$(\".love-block .text-block\").autotype();\n//\n//\t\t// setTimeout(function(){\n//\t\t//     $(\".love-block .text-body\").autotype();\n//\t\t// }, 1000);\n//\t\t// setTimeout(function(){\n//\t\t//     $(\".love-block .text-body\").autotype(\"2222222222行\");\n//\t\t// }, 5000);\n//\n//\t\tvar zrender = require('zrender/zrender');\n//\t\tvar HeartShape = require('zrender/shape/Heart');\n//\t\tvar TextShape = require('zrender/shape/Text');\n//\t\tvar Animation = require('zrender/animation/Animation');\n//\n//\t\tzr = zrender.init(document.getElementById('love-block'));\n//\t\tvar width = Math.ceil(zr.getWidth());\n//\t\tvar height = Math.ceil(zr.getHeight());\n//\t\tvar util = require('zrender/tool/util');\n//\t\tvar eventTool = require('zrender/tool/event');\n//\t\tvar guid = require('zrender/tool/guid');\n//\t\tvar gameRunning;\n//\t\tvar shapeList = [];\n//\t\tvar heartShapes = [];\n//\t\tvar pointText;\n//\t\tvar knife;\n//\t\tvar hasCatched = {};\n//\t\tvar gamTicket;\n//\t\tvar timeTicket;\n//\t\tvar timeInterval;\n//\t\tvar gameTime = 10;\n//\t\tvar timer;\n//\t\tvar clearHeart = false;\n//\t\tvar heartShapeBig = new HeartShape({\n//\t\t\tstyle    : {\n//\t\t\t\tx        : 320,\n//\t\t\t\ty        : 350,\n//\t\t\t\ta        : 30,\n//\t\t\t\tb        : 45,\n//\t\t\t\tbrushType: 'fill',\n//\t\t\t\tcolor    : '#E73225',\n//\t\t\t\topacity  : 1,\n//\t\t\t\tid       : guid(),\n//\t\t\t\tz        : 100\n//\t\t\t},\n//\t\t\thoverable: false\n//\t\t});\n//\t\tzr.addShape(heartShapeBig);\n//\t\tzr.render();\n//\n//\t\tvar audioPlay = function () {\n//\t\t\taudioEle.play(); //音频将被加载并播放\n//\t\t};\n//\t\t// $(\".love-block .audio-btn\").on(\"click\", audioPlay);\n//\n//\t\t$(\".continue-btn\").on(\"touchend\", function () {\n//\t\t\t$(\".love-block\").hide();\n//\t\t\t$(\".text-block2\").hide();\n//\t\t\t$(\".text-block3\").hide();\n//\t\t\taudioEle.pause();\n//\t\t\t$(this).hide();\n//\t\t\tzr.clear();\n//\t\t});\n//\n//\t\tfunction getRandomNum(from, to) {\n//\t\t\treturn from + Math.floor(Math.random() * to);\n//\t\t}\n//\n//\t\tclearInterval(timeInterval);\n//\t\ttimeInterval = setInterval(function () {\n//\t\t\tfor (var i = 0; i < 8; i++) {\n//\t\t\t\tvar randomSize = getRandomNum(12, 20);\n//\t\t\t\tvar heartShape = new HeartShape({\n//\t\t\t\t\tstyle    : {\n//\t\t\t\t\t\tx        : getRandomNum(0, 640),\n//\t\t\t\t\t\ty        : getRandomNum(0, 800),\n//\t\t\t\t\t\ta        : randomSize,\n//\t\t\t\t\t\tb        : 1.5 * randomSize,\n//\t\t\t\t\t\tbrushType: 'fill',\n//\t\t\t\t\t\tcolor    : Math.random() > 0.5 ? '#ee6d66' : '#E73225',\n//\t\t\t\t\t\topacity  : 00,\n//\t\t\t\t\t\tid       : guid()\n//\t\t\t\t\t},\n//\t\t\t\t\thoverable: false\n//\t\t\t\t});\n//\t\t\t\theartShapes.push(heartShape);\n//\t\t\t\tzr.addShape(heartShape);\n//\t\t\t\tzr.refresh();\n//\t\t\t\tzr.animate(heartShape.id, 'style')\n//\t\t\t\t\t\t.when(500, {\n//\t\t\t\t\t\t\topacity: 0.5\n//\t\t\t\t\t\t})\n//\t\t\t\t\t\t.start('easing');\n//\t\t\t\t// zr.animate(heartShape.id, 'style')\n//\t\t\t\t//     .delay(6*1000)\n//\t\t\t\t//     .when(500, {\n//\t\t\t\t//         x: 320,\n//\t\t\t\t//         y: 400,\n//\t\t\t\t//         opacity: 0\n//\t\t\t\t//     })\n//\t\t\t\t//     .done(function() {\n//\t\t\t\t//         zr.delShape(heartShape.id);\n//\t\t\t\t//         setTimeout(function() {\n//\t\t\t\t//             clearInterval(timeInterval);\n//\t\t\t\t//         }, 1000);\n//\t\t\t\t//     })\n//\t\t\t\t//     .start('easing');\n//\t\t\t\t// zr.refresh();\n//\t\t\t}\n//\t\t\t;\n//\t\t\t// if (heartShapes.length >= 50) {\n//\t\t\t//     clearHeart = true;\n//\t\t\t// }\n//\t\t}, 500);\n//\n//\t\t// if (clearHeart) {\n//\t\t//     moveHeartShape();\n//\t\t//     setTimeout(function(){\n//\t\t//         clearInterval(timeInterval);\n//\t\t//     }, 1000);\n//\t\t// }\n//\t\tsetTimeout(function () {\n//\t\t\tmoveHeartShape();\n//\t\t\tsetTimeout(function () {\n//\t\t\t\tclearInterval(timeInterval);\n//\t\t\t}, 500);\n//\t\t}, 7 * 1000);\n//\n//\t\tfunction moveHeartShape() {\n//\t\t\tvar timer;\n//\t\t\tvar currentSizeA = 30;\n//\t\t\tvar currentSizeB;\n//\t\t\tclearInterval(timer);\n//\t\t\ttimer = setInterval(function () {\n//\t\t\t\tcurrentSizeA += 10;\n//\t\t\t\tcurrentSizeB = 1.5 * currentSizeA;\n//\t\t\t\tif (!heartShapes.length) {\n//\t\t\t\t\tclearInterval(timer);\n//\t\t\t\t\tzr.animate(heartShapeBig.id, 'style', true)\n//\t\t\t\t\t\t\t.when(500, {\n//\t\t\t\t\t\t\t\ta: currentSizeA + 5,\n//\t\t\t\t\t\t\t\tb: 1.5 * (currentSizeA + 5)\n//\t\t\t\t\t\t\t})\n//\t\t\t\t\t\t\t.when(1000, {\n//\t\t\t\t\t\t\t\ta: currentSizeA - 5,\n//\t\t\t\t\t\t\t\tb: 1.5 * (currentSizeA - 5)\n//\t\t\t\t\t\t\t})\n//\t\t\t\t\t\t\t.start('easing');\n//\t\t\t\t\t$(\".love-block .text-block2\").show().autotype();\n//\t\t\t\t\tsetTimeout(function () {\n//\t\t\t\t\t\t$(\".love-block .text-block3\").show().autotype();\n//\t\t\t\t\t\tsetTimeout(function () {\n//\t\t\t\t\t\t\t$(\".love-block .continue-btn\").show();\n//\t\t\t\t\t\t}, 3000);\n//\t\t\t\t\t}, 15 * 1000);\n//\t\t\t\t}\n//\t\t\t\t;\n//\t\t\t\theartShapes.length > 15 ? length = 15 : length = heartShapes.length;\n//\t\t\t\tfor (var i = 0; i < length; i++) {\n//\t\t\t\t\tzr.animate(heartShapes[i].id, 'style')\n//\t\t\t\t\t\t\t.when(800, {\n//\t\t\t\t\t\t\t\tx      : 320,\n//\t\t\t\t\t\t\t\ty      : 350,\n//\t\t\t\t\t\t\t\topacity: 0\n//\t\t\t\t\t\t\t})\n//\t\t\t\t\t\t\t.done(function () {\n//\t\t\t\t\t\t\t\t// zr.delShape(heartShapes[i].id);\n//\t\t\t\t\t\t\t\tzr.animate(heartShapeBig.id, 'style')\n//\t\t\t\t\t\t\t\t\t\t.when(600, {\n//\t\t\t\t\t\t\t\t\t\t\ta: currentSizeA,\n//\t\t\t\t\t\t\t\t\t\t\tb: currentSizeB\n//\t\t\t\t\t\t\t\t\t\t})\n//\t\t\t\t\t\t\t\t\t\t.start('easing');\n//\t\t\t\t\t\t\t})\n//\t\t\t\t\t\t\t.start('easing');\n//\t\t\t\t}\n//\t\t\t\t;\n//\t\t\t\tfor (var i = 0; i < length; i++) {\n//\t\t\t\t\theartShapes.shift();\n//\t\t\t\t}\n//\t\t\t\t;\n//\t\t\t}, 500);\n//\t\t}\n//\n//\t\tzr.refresh();\n//\t}\n//});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/app.js\n ** module id = 2\n ** module chunks = 1\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nmodule.exports = function(updatedModules, renewedModules) {\r\n\tvar unacceptedModules = updatedModules.filter(function(moduleId) {\r\n\t\treturn renewedModules && renewedModules.indexOf(moduleId) < 0;\r\n\t});\r\n\r\n\tif(unacceptedModules.length > 0) {\r\n\t\tconsole.warn(\"[HMR] The following modules couldn't be hot updated: (They would need a full reload!)\");\r\n\t\tunacceptedModules.forEach(function(moduleId) {\r\n\t\t\tconsole.warn(\"[HMR]  - \" + moduleId);\r\n\t\t});\r\n\t}\r\n\r\n\tif(!renewedModules || renewedModules.length === 0) {\r\n\t\tconsole.log(\"[HMR] Nothing hot updated.\");\r\n\t} else {\r\n\t\tconsole.log(\"[HMR] Updated modules:\");\r\n\t\trenewedModules.forEach(function(moduleId) {\r\n\t\t\tconsole.log(\"[HMR]  - \" + moduleId);\r\n\t\t});\r\n\t}\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/hot/log-apply-result.js\n ** module id = 6\n ** module chunks = 1\n **/","var Backbone = require('backbone');\nvar $ = require('jquery');\n\nvar StartView = require('./module/start/startView');\nvar HeaderView = require('./module/header/headerView');\nvar HeaderModel = require('./module/header/headerModel');\nvar GridsCollection = require('./module/main/gridsCollection');\nvar MainView = require('./module/main/mainView');\n\nvar $startMask = $('#start-mask');\nvar $header = $('#header');\nvar $main = $('#main');\n\nvar AppView = Backbone.View.extend({\n\tel: '#app-wrap',\n\n\tinitialize: function () {\n\t\tvar startView = new StartView();\n\t\t$startMask.html(startView.el);\n\t},\n\n\trender: function (role) {\n\t\tif (!role) {\n\t\t\t$startMask.show();\n\t\t} else {\n\t\t\t$startMask.hide();\n\n\t\t\t// 根据选择的角色场景，渲染相应的游戏主界面\n\t\t\tif (typeof role === 'string') {\n\t\t\t\tvar renderFun = this.toCamelCase('render', role);\n\t\t\t\tthis[renderFun] && this[renderFun]();\n\t\t\t}\n\t\t}\n\t},\n\n\trenderIt: function () {\n\n\t\t// 清空旧视图界面，三个角色共享一个游戏主界面\n\t\tGAME_APP.headerView && GAME_APP.headerView.remove();\n\t\tGAME_APP.mainView && GAME_APP.mainView.remove();\n\n\t\t// 渲染 header 部分视图， 每个角色对应一个独立 headerModel\n\t\tGAME_APP.itHeaderModel || (GAME_APP.itHeaderModel = new HeaderModel());\n\t\tGAME_APP.headerView = new HeaderView({\n\t\t\tmodel: GAME_APP.itHeaderModel\n\t\t});\n\t\t$header.html(GAME_APP.headerView.el);\n\n\t\t// 渲染 main 部分视图，每个角色对应一个独立 gridsCollection\n\t\tGAME_APP.itGridsCollection || (GAME_APP.itGridsCollection = new GridsCollection());\n\t\tGAME_APP.mainView = new MainView({\n\t\t\tcollection: GAME_APP.itGridsCollection\n\t\t});\n\t\t$main.html(GAME_APP.mainView.el);\n\n\t\t// 如果数据为空，则初始化生成两个 grids\n\t\tif (!GAME_APP.itGridsCollection.length) {\n\t\t\tGAME_APP.itGridsCollection.generateGrid();\n\t\t\tGAME_APP.itGridsCollection.generateGrid();\n\t\t}\n\t},\n\n\trenderArch: function () {\n\n\t\t// 清空旧视图界面，三个角色共享一个游戏主界面\n\t\tGAME_APP.headerView && GAME_APP.headerView.remove();\n\t\tGAME_APP.mainView && GAME_APP.mainView.remove();\n\n\t\t// 渲染 header 部分视图， 每个角色对应一个独立 headerModel\n\t\tGAME_APP.archHeaderModel || (GAME_APP.archHeaderModel = new HeaderModel({title: '迎娶黑富美游戏'}));\n\t\tGAME_APP.headerView = new HeaderView({\n\t\t\tmodel: GAME_APP.archHeaderModel\n\t\t});\n\t\t$header.html(GAME_APP.headerView.el);\n\n\t\t// 渲染 main 部分视图，每个角色对应一个独立 gridsCollection\n\t\tGAME_APP.archGridsCollection || (GAME_APP.archGridsCollection = new GridsCollection());\n\t\tGAME_APP.mainView = new MainView({\n\t\t\tcollection: GAME_APP.archGridsCollection\n\t\t});\n\t\t$main.html(GAME_APP.mainView.el);\n\n\t\t// 如果数据为空，则初始化生成两个 grids\n\t\tif (!GAME_APP.archGridsCollection.length) {\n\t\t\tGAME_APP.archGridsCollection.generateGrid();\n\t\t\tGAME_APP.archGridsCollection.generateGrid();\n\t\t}\n\t},\n\n\trenderOther: function () {\n\n\t\t// 清空旧视图界面，三个角色共享一个游戏主界面\n\t\tGAME_APP.headerView && GAME_APP.headerView.remove();\n\t\tGAME_APP.mainView && GAME_APP.mainView.remove();\n\n\t\t// 渲染 header 部分视图， 每个角色对应一个独立 headerModel\n\t\tGAME_APP.otherHeaderModel || (GAME_APP.otherHeaderModel = new HeaderModel());\n\t\tGAME_APP.headerView = new HeaderView({\n\t\t\tmodel: GAME_APP.otherHeaderModel\n\t\t});\n\t\t$header.html(GAME_APP.headerView.el);\n\n\t\t// 渲染 main 部分视图，每个角色对应一个独立 gridsCollection\n\t\tGAME_APP.otherGridsCollection || (GAME_APP.otherGridsCollection = new GridsCollection());\n\t\tGAME_APP.mainView = new MainView({\n\t\t\tcollection: GAME_APP.otherGridsCollection\n\t\t});\n\t\t$main.html(GAME_APP.mainView.el);\n\n\t\t// 如果数据为空，则初始化生成两个 grids\n\t\tif (!GAME_APP.otherGridsCollection.length) {\n\t\t\tGAME_APP.otherGridsCollection.generateGrid();\n\t\t\tGAME_APP.otherGridsCollection.generateGrid();\n\t\t}\n\t},\n\n\t// 将多个字符串拼凑成 CamelCase 样式\n\ttoCamelCase: function () {\n\t\tvar camelCase = '';\n\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (i != 0) {\n\t\t\t\targ = arg.charAt(0).toUpperCase() + arg.slice(1).toLowerCase();\n\t\t\t} else {\n\t\t\t\targ = arg.toLowerCase();\n\t\t\t}\n\t\t\tcamelCase += arg;\n\t\t}\n\t\treturn camelCase;\n\t}\n});\n\nmodule.exports = AppView;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/appView.js\n ** module id = 7\n ** module chunks = 1\n **/","var Backbone = require('backbone');\nvar GAME_APP = window.GAME_APP;\n\nvar AppRouter = Backbone.Router.extend({\n\troutes: {\n\t\t'*role': 'chooseRole'\n\t},\n\n\tchooseRole: function (role) {\n\n\t\t// 存储角色场景选择\n\t\tGAME_APP.ROLE = role;\n\n\t\t// 当角色有变化时，重新渲染游戏主界面\n\t\tGAME_APP.appView.render(role);\n\t}\n});\n\nmodule.exports = AppRouter;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/router.js\n ** module id = 8\n ** module chunks = 1\n **/","var Backbone = require('backbone');\nvar startTpl = require('./start.ejs');\n\nvar StartView = Backbone.View.extend({\n\tclassName: 'start-mask',\n\ttemplate : startTpl,\n\n\tinitialize: function () {\n\t\tthis.render();\n\t},\n\n\trender: function () {\n\t\tthis.$el.html(this.template());\n\t\treturn this;\n\t}\n});\n\nmodule.exports = StartView;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/module/start/startView.js\n ** module id = 9\n ** module chunks = 1\n **/","var Backbone = require('backbone');\nvar headerTpl = require('./header.ejs');\n\nvar HeaderView = Backbone.View.extend({\n\tclassName: 'header',\n\ttemplate : headerTpl,\n\n\tevents: {\n\t\t'click .start-btn': 'resetView'\n\t},\n\n\tinitialize: function () {\n\t\tthis.listenTo(this.model, {\n\t\t\t'change': this.render\n\t\t});\n\n\t\tthis.render();\n\t},\n\n\trender: function () {\n\n\t\t// 当得分重置为 0 时\n\t\tif (!this.model.get('score')) {\n\n\t\t\t// 获取之前变化的得分\n\t\t\tvar preScore = this.model.previous('score');\n\n\t\t\t// 更新最高得分\n\t\t\tvar highestScore = this.model.get('highestScore');\n\t\t\t(highestScore < preScore) && this.model.set({\n\t\t\t\thighestScore: preScore\n\t\t\t}, {silent: true});\n\t\t}\n\n\t\tthis.$el.html(this.template(this.model.toJSON()));\n\n\t\treturn this;\n\t},\n\n\tresetView: function () {\n\n\t\t// 清空 grids 数据，触发 reset 事件，更新 mainView\n\t\tGAME_APP[GAME_APP.ROLE + 'GridsCollection'].reset();\n\n\t\t// 重置当前得分\n\t\tthis.model.resetScore();\n\t}\n});\n\nmodule.exports = HeaderView;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/module/header/headerView.js\n ** module id = 10\n ** module chunks = 1\n **/","var Backbone = require('backbone');\n\nvar HeaderModel = Backbone.Model.extend({\n\tdefaults  : {\n\t\tscore       : 0,\n\t\thighestScore: 0,\n\t\ttitle       : \"赢取白富美游戏\"\n\t},\n\n\t// 重置得分数据\n\tresetScore: function () {\n\t\tthis.set({\n\t\t\tscore: 0\n\t\t});\n\t}\n});\n\nmodule.exports = HeaderModel;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/module/header/headerModel.js\n ** module id = 11\n ** module chunks = 1\n **/","var Backbone = require('backbone');\nvar GridModel = require('../grid/gridModel');\nvar GRIDS_LENGTH = 16;\nvar _ = require('underscore');\n\nvar GridsCollection = Backbone.Collection.extend({\n\n\tmodel: GridModel,\n\n\tinitialize: function () {\n\t\tthis.BLOCKDATA_LENGTH_X = 4;\n\t\tthis.BLOCKDATA_LENGTH_Y = 4;\n\t\tthis.resetBlock();\n\t},\n\n\tisGameOver: function () {\n\t\tvar blockData = this.blockData;\n\t\tvar BLOCKDATA_LENGTH_X = this.BLOCKDATA_LENGTH_X;\n\t\tvar BLOCKDATA_LENGTH_Y = this.BLOCKDATA_LENGTH_Y;\n\n\t\t// 判断是否有位置空间\n\t\tif (this.length === GRIDS_LENGTH) {\n\n\t\t\t// 4*4 布局中，判断 3*3 布局中判断每一个 gird 右边和下边是否有相同值的 grid\n\t\t\tfor (var i = 0, l1 = BLOCKDATA_LENGTH_X - 1; i < l1; i++) {\n\t\t\t\tfor (var j = 0, l2 = BLOCKDATA_LENGTH_Y - 1; j < l2; j++) {\n\n\t\t\t\t\t// 判断每一个 gird 右边和下边是否有相同值的 grid\n\t\t\t\t\tif (blockData[i][j] == blockData[i + 1][j] ||\n\t\t\t\t\t    blockData[i][j] == blockData[i][j + 1]) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 4*4 布局中，判断最后一列中每一个 gird 下边是否有相同值的 grid\n\t\t\tfor (var m = 0, l3 = BLOCKDATA_LENGTH_Y - 1; m < l3; m++) {\n\n\t\t\t\t// 判断每一个 gird 下边是否有相同值的 grid\n\t\t\t\tif (blockData[m][l3] == blockData[m + 1][l3]) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 4*4 布局中，判断最后一行中每一个 gird 右边是否有相同值的 grid\n\t\t\tfor (var k = 0, l4 = BLOCKDATA_LENGTH_X - 1; k < l4; k++) {\n\n\t\t\t\t// 判断每一个 gird 右边是否有相同值的 grid\n\t\t\t\tif (blockData[l4][k] == blockData[l4][k + 1]) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tgenerateGrid     : function () {\n\n\t\t// 如果位置不够，则不用添加\n\t\tif (this.length === GRIDS_LENGTH) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar blockTextMapping = this.blockTextMapping();\n\t\tvar randomNum = Math.random() < 0.5 ? 2 : 4;\n\n\t\tvar blockPos = this.generateRandomPos();\n\t\tvar layoutPos = {\n\t\t\ttop : 16 + blockPos.xPos * 144 + 'px',\n\t\t\tleft: 16 + blockPos.yPos * 144 + 'px'\n\t\t};\n\n\t\t// 创建新的 model 配置\n\t\tvar newModel = new this.model({\n\t\t\tnum      : randomNum,\n\t\t\ttext     : blockTextMapping[randomNum],\n\t\t\tblockPos : blockPos,\n\t\t\tlayoutPos: layoutPos\n\t\t});\n\t\tthis.blockData[blockPos.xPos][blockPos.yPos] = randomNum;\n\n\t\t// 给 collection 添加一个新的 gridModel\n\t\tthis.add(newModel);\n\n\t\treturn newModel;\n\t},\n\n\t// 生成随机位置\n\tgenerateRandomPos: function () {\n\t\tvar blockData = this.blockData;\n\t\tvar BLOCKDATA_LENGTH_X = this.BLOCKDATA_LENGTH_X;\n\t\tvar BLOCKDATA_LENGTH_Y = this.BLOCKDATA_LENGTH_Y;\n\t\tvar count = GRIDS_LENGTH - this.length;\n\t\tvar zeroCount = 0;\n\t\tvar randomCount = Math.floor(Math.random() * count);\n\n\t\tfor (var i = 0, l1 = BLOCKDATA_LENGTH_X; i < l1; i++) {\n\t\t\tfor (var j = 0, l2 = BLOCKDATA_LENGTH_Y; j < l2; j++) {\n\t\t\t\tif (!blockData[i][j]) {\n\t\t\t\t\tif (zeroCount === randomCount) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\txPos: i,\n\t\t\t\t\t\t\tyPos: j\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tzeroCount++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// 重置 blockData 二维数组\n\tresetBlock       : function () {\n\t\tvar blockData = [];\n\t\tfor (var i = 0; i < 4; i++) {\n\t\t\tblockData[i] = new Array(4);\n\t\t}\n\n\t\tthis.blockData = blockData;\n\t},\n\n\tmoveBlock       : function (direction) {\n\n\t\t// 获取 num-text 映射关系\n\t\tvar blockTextMapping = this.blockTextMapping();\n\t\tvar BLOCKDATA_LENGTH_X = this.BLOCKDATA_LENGTH_X;\n\t\tvar BLOCKDATA_LENGTH_Y = this.BLOCKDATA_LENGTH_Y;\n\t\tvar blockData = this.blockData;\n\t\tvar that = this;\n\t\tvar posOrigin;\n\t\tvar pos;\n\t\tvar toPos;\n\n\t\tswitch (direction) {\n\t\t\tcase 'left':\n\t\t\t\tfor (var i = 0, l1 = BLOCKDATA_LENGTH_X; i < l1; i++) {\n\t\t\t\t\tposOrigin = -1;\n\t\t\t\t\tfor (var j = 1, l2 = BLOCKDATA_LENGTH_Y; j < l2; j++) {\n\t\t\t\t\t\tif (!blockData[i][j]) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpos = new Array(i, j);\n\t\t\t\t\t\ttoPos = this.canMoveLeft(pos, posOrigin);\n\n\t\t\t\t\t\tif (toPos) {\n\t\t\t\t\t\t\tdoMove(that, pos, toPos);\n\n\t\t\t\t\t\t\t// 设置新的可移动起点\n\t\t\t\t\t\t\tposOrigin = toPos[1] - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// 添加新 grid\n\t\t\t\tthis.generateGrid();\n\t\t\t\tbreak;\n\t\t\tcase'right':\n\t\t\t\tfor (var i = 0, l1 = BLOCKDATA_LENGTH_X; i < l1; i++) {\n\t\t\t\t\tposOrigin = 4;\n\t\t\t\t\tfor (var j = BLOCKDATA_LENGTH_Y - 2; j > -1; j--) {\n\t\t\t\t\t\tif (!blockData[i][j]) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpos = new Array(i, j);\n\t\t\t\t\t\ttoPos = this.canMoveRight(pos, posOrigin);\n\n\t\t\t\t\t\tif (toPos) {\n\t\t\t\t\t\t\tdoMove(that, pos, toPos);\n\n\t\t\t\t\t\t\t// 设置新的可移动起点\n\t\t\t\t\t\t\tposOrigin = toPos[1] + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// 添加新 grid\n\t\t\t\tthis.generateGrid();\n\t\t\t\tbreak;\n\t\t\tcase'up':\n\t\t\t\tfor (var i = 0, l1 = BLOCKDATA_LENGTH_Y; i < l1; i++) {\n\t\t\t\t\tposOrigin = -1;\n\t\t\t\t\tfor (var j = 1, l2 = BLOCKDATA_LENGTH_X; j < l2; j++) {\n\t\t\t\t\t\tif (!blockData[j][i]) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpos = new Array(j, i);\n\t\t\t\t\t\ttoPos = this.canMoveUp(pos, posOrigin);\n\n\t\t\t\t\t\tif (toPos) {\n\t\t\t\t\t\t\tdoMove(that, pos, toPos);\n\n\t\t\t\t\t\t\t// 设置新的可移动起点\n\t\t\t\t\t\t\tposOrigin = toPos[0] - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// 添加新 grid\n\t\t\t\tthis.generateGrid();\n\t\t\t\tbreak;\n\t\t\tcase'down':\n\t\t\t\tfor (var i = 0, l1 = BLOCKDATA_LENGTH_Y; i < l1; i++) {\n\t\t\t\t\tposOrigin = 4;\n\t\t\t\t\tfor (var j = BLOCKDATA_LENGTH_Y - 2; j > -1; j--) {\n\t\t\t\t\t\tif (!blockData[j][i]) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpos = new Array(j, i);\n\t\t\t\t\t\ttoPos = this.canMoveDown(pos, posOrigin);\n\n\t\t\t\t\t\tif (toPos) {\n\t\t\t\t\t\t\tdoMove(that, pos, toPos);\n\n\t\t\t\t\t\t\t// 设置新的可移动起点\n\t\t\t\t\t\t\tposOrigin = toPos[0] + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// 添加新 grid\n\t\t\t\tthis.generateGrid();\n\t\t\t\tbreak;\n\t\t\tdefault :\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// 实际移动 grids\n\t\tfunction doMove(that, pos, toPos) {\n\t\t\tvar score;\n\t\t\tvar x = pos[0];\n\t\t\tvar y = pos[1];\n\t\t\tvar toX = toPos[0];\n\t\t\tvar toY = toPos[1];\n\t\t\tvar addNum;\n\n\t\t\tvar removeBlcok = function () {\n\t\t\t\tthat.remove(toBlock);\n\t\t\t};\n\n\t\t\t// 如果指定位置有 grid ，并且两个 grids 值相等，则按 grids 碰撞处理\n\t\t\tif (blockData[x][y] == blockData[toX][toY]) {\n\t\t\t\tblockData[toX][toY] += blockData[x][y];\n\t\t\t\tblockData[x][y] = 0;\n\t\t\t\taddNum = blockData[toX][toY];\n\n\t\t\t\t// 删除目的地的 grid\n\t\t\t\tvar toBlock = that.filter(function (model) {\n\t\t\t\t\tif (model.get('blockPos').xPos === toX && model.get('blockPos').yPos === toY) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t\t// setTimeout(removeBlcok, 80);\n\t\t\t\tthat.remove(toBlock);\n\n\t\t\t\t// 修改可移动 grid 的 model 数据\n\t\t\t\tvar curBlock = that.filter(function (model) {\n\t\t\t\t\tif (model.get('blockPos').xPos === x && model.get('blockPos').yPos === y) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t\t_.invoke(curBlock, 'set', {\n\t\t\t\t\tblockPos : {\n\t\t\t\t\t\txPos: toX,\n\t\t\t\t\t\tyPos: toY\n\t\t\t\t\t},\n\t\t\t\t\tlayoutPos: {\n\t\t\t\t\t\ttop : 16 + toX * 144 + 'px',\n\t\t\t\t\t\tleft: 16 + toY * 144 + 'px'\n\t\t\t\t\t},\n\t\t\t\t\tnum      : addNum,\n\t\t\t\t\ttext     : blockTextMapping[addNum]\n\t\t\t\t});\n\n\t\t\t\t// 修改总得分 Model\n\t\t\t\tscore = GAME_APP[GAME_APP.ROLE + 'HeaderModel'].get('score');\n\t\t\t\tGAME_APP[GAME_APP.ROLE + 'HeaderModel'].set({\n\t\t\t\t\tscore: score + 2 * blockData[toX][toY]\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\t// 直接移动 grid 到指定位置\n\t\t\t\tblockData[toX][toY] = blockData[x][y];\n\t\t\t\tblockData[x][y] = 0;\n\n\t\t\t\t// 更新移动 grid 的显示位置\n\t\t\t\tvar curBlock = that.filter(function (model) {\n\t\t\t\t\tif (model.get('blockPos').xPos === x && model.get('blockPos').yPos === y) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t\t_.invoke(curBlock, 'set', {\n\t\t\t\t\tblockPos : {\n\t\t\t\t\t\txPos: toX,\n\t\t\t\t\t\tyPos: toY\n\t\t\t\t\t},\n\t\t\t\t\tlayoutPos: {\n\t\t\t\t\t\ttop : 16 + toX * 144 + 'px',\n\t\t\t\t\t\tleft: 16 + toY * 144 + 'px'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\t// 根据角色场景，选择不同 num-text 映射关系\n\tblockTextMapping: function () {\n\t\tvar role = GAME_APP.ROLE;\n\n\t\tif (role == 'arch') {\n\t\t\tblockTextMapping = {\n\t\t\t\t2   : '实习僧',\n\t\t\t\t4   : '刷夜狗',\n\t\t\t\t8   : '画图工具',\n\t\t\t\t16  : '建筑师',\n\t\t\t\t32  : '主创',\n\t\t\t\t64  : '小组长',\n\t\t\t\t128 : '项目头',\n\t\t\t\t256 : '设计总监',\n\t\t\t\t512 : '总经理',\n\t\t\t\t1024: 'CEO',\n\t\t\t\t2048: '黑富美'\n\t\t\t};\n\t\t} else if (role == 'it') {\n\t\t\tblockTextMapping = {\n\t\t\t\t2   : '实习生',\n\t\t\t\t4   : '页面仔',\n\t\t\t\t8   : '码农',\n\t\t\t\t16  : '程序猿',\n\t\t\t\t32  : '攻城狮',\n\t\t\t\t64  : '产品狗',\n\t\t\t\t128 : '产品经理',\n\t\t\t\t256 : '产品总监',\n\t\t\t\t512 : '总经理',\n\t\t\t\t1024: 'CEO',\n\t\t\t\t2048: '白富美'\n\t\t\t};\n\t\t} else {\n\t\t\tblockTextMapping = {\n\t\t\t\t2   : '2',\n\t\t\t\t4   : '4',\n\t\t\t\t8   : '8',\n\t\t\t\t16  : '16',\n\t\t\t\t32  : '32',\n\t\t\t\t64  : '64',\n\t\t\t\t128 : '126',\n\t\t\t\t256 : '256',\n\t\t\t\t512 : '512',\n\t\t\t\t1024: '1024',\n\t\t\t\t2048: '2048'\n\t\t\t};\n\t\t}\n\t\treturn blockTextMapping;\n\t},\n\n\t// 分别判断某个位置的 grid 是否能按上下左右四个方向移动\n\tcanMoveLeft     : function (pos, posOrigin) {\n\t\tvar blockData = this.blockData;\n\t\tvar toPos = 0;\n\t\tvar x = pos[0];\n\t\tvar y = pos[1];\n\n\t\tfor (var j = y - 1; j > posOrigin; j--) {\n\t\t\tif (!blockData[x][j]) {\n\t\t\t\ttoPos = [x, j];\n\t\t\t\tcontinue;\n\t\t\t} else if (blockData[x][j] == blockData[x][y]) {\n\t\t\t\ttoPos = [x, j];\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn toPos;\n\t},\n\n\tcanMoveRight: function (pos, posOrigin) {\n\t\tvar blockData = this.blockData;\n\t\tvar toPos = 0;\n\t\tvar x = pos[0];\n\t\tvar y = pos[1];\n\n\t\tfor (var j = y + 1; j < posOrigin; j++) {\n\t\t\tif (!blockData[x][j]) {\n\t\t\t\ttoPos = [x, j];\n\t\t\t\tcontinue;\n\t\t\t} else if (blockData[x][j] == blockData[x][y]) {\n\t\t\t\ttoPos = [x, j];\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn toPos;\n\t},\n\n\tcanMoveUp: function (pos, posOrigin) {\n\t\tvar blockData = this.blockData;\n\t\tvar toPos = 0;\n\t\tvar x = pos[0];\n\t\tvar y = pos[1];\n\n\t\tfor (var j = x - 1; j > posOrigin; j--) {\n\t\t\tif (!blockData[j][y]) {\n\t\t\t\ttoPos = [j, y];\n\t\t\t\tcontinue;\n\t\t\t} else if (blockData[j][y] == blockData[x][y]) {\n\t\t\t\ttoPos = [j, y];\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn toPos;\n\t},\n\n\tcanMoveDown: function (pos, posOrigin) {\n\t\tvar blockData = this.blockData;\n\t\tvar toPos = 0;\n\t\tvar x = pos[0];\n\t\tvar y = pos[1];\n\n\t\tfor (var j = x + 1; j < posOrigin; j++) {\n\t\t\tif (!blockData[j][y]) {\n\t\t\t\ttoPos = [j, y];\n\t\t\t\tcontinue;\n\t\t\t} else if (blockData[j][y] == blockData[x][y]) {\n\t\t\t\ttoPos = [j, y];\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn toPos;\n\t}\n});\n\nmodule.exports = GridsCollection;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/module/main/gridsCollection.js\n ** module id = 12\n ** module chunks = 1\n **/","var Backbone = require('backbone');\nvar $ = require('jquery');\nvar _ = require('underscore');\n\nvar mainTpl = require('./main.ejs');\nvar GridView = require('../grid/gridView');\nvar GameOverView = require('../game_over/gameOverView');\n\nvar MainView = Backbone.View.extend({\n\ttemplate : mainTpl,\n\tclassName: 'main',\n\n\tevents: {\n\t\t'touchstart': 'touchStart',\n\t\t'touchend'  : 'touchEnd'\n\t},\n\n\tinitialize: function () {\n\t\tthis.listenTo(this.collection, {\n\t\t\t'add'  : this.addBlock,\n\t\t\t'reset': this.resetBlock\n\t\t});\n\n\t\tthis.touchPos = [];\n\n\t\tthis.render();\n\t\tthis.collection.length && this.collection.each(this.addBlock, this);\n\n\t\tvar moveBlock = _.bind(this.moveBlock, this);\n\t\t$(document).off('keydown');\n\t\t$(document).on('keydown', moveBlock);\n\t},\n\n\trender   : function () {\n\t\tthis.$el.html(this.template());\n\t\treturn this;\n\t},\n\n\t// 当新增 gridModel 时，给 mainView 添加一个 gridView\n\taddBlock : function (gridModel) {\n\t\tvar view = new GridView({\n\t\t\tmodel: gridModel\n\t\t});\n\t\tthis.$('.grids-layout').append(view.el);\n\t},\n\n\t// 响应用户移动 grid 操作\n\tmoveBlock: function (event) {\n\t\tvar timer;\n\t\tvar that = this;\n\t\tvar direction = typeof event === 'object' ? event.which : event;\n\n\t\ttypeof event === 'object' &&\n\t\t(event.which == 37 || event.which == 38 || event.which == 39 || event.which == 40) &&\n\t\tevent.preventDefault();\n\n\t\tswitch (direction) {\n\t\t\tcase 37:\n\t\t\t{\n\t\t\t\t// 移动 grid\n\t\t\t\tthis.collection.moveBlock('left');\n\n\t\t\t\t// 判断游戏是否结束或是否需要添加新 grid\n\t\t\t\tafterMoveBlcok(that);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 38:\n\t\t\t{\n\t\t\t\tthis.collection.moveBlock('up');\n\t\t\t\tafterMoveBlcok(that);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 39:\n\t\t\t{\n\t\t\t\tthis.collection.moveBlock('right');\n\t\t\t\tafterMoveBlcok(that);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 40:\n\t\t\t{\n\t\t\t\tthis.collection.moveBlock('down');\n\t\t\t\tafterMoveBlcok(that);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tfunction afterMoveBlcok(that) {\n\t\t\tif (that.collection.isGameOver()) {\n\n\t\t\t\t// 显示游戏结束界面\n\t\t\t\ttimer = setTimeout(function () {\n\t\t\t\t\tthat.showGameOverView();\n\t\t\t\t}, 1000);\n\t\t\t}\n\t\t}\n\t},\n\n\tresetBlock: function () {\n\n\t\t// 重置界面\n\t\tthis.render();\n\n\t\t// 重置 blockData 二维数组\n\t\tthis.collection.resetBlock();\n\n\t\t// 添加两个新 grids\n\t\tthis.collection.generateGrid();\n\t\tthis.collection.generateGrid();\n\t},\n\n\tshowGameOverView: function () {\n\t\tif (GAME_APP.gameOverView) {\n\t\t\t$('.game-over-mask').show();\n\t\t} else {\n\t\t\tGAME_APP.gameOverView = new GameOverView();\n\t\t\t$('#app-wrap').append(GAME_APP.gameOverView.el);\n\t\t}\n\t},\n\n\ttouchStart: function (evt) {\n\t\tvar touchPos = this.touchPos;\n\t\tevt.preventDefault();\n\n\t\ttouchPos[0] = {\n\t\t\t\"x\": evt.originalEvent.touches[0].pageX,\n\t\t\t\"y\": evt.originalEvent.touches[0].pageY\n\t\t};\n\t},\n\n\ttouchEnd: function (evt) {\n\t\tvar touchPos = this.touchPos;\n\t\tevt.preventDefault();\n\n\t\ttouchPos[1] = {\n\t\t\t\"x\": evt.originalEvent.changedTouches[0].pageX,\n\t\t\t\"y\": evt.originalEvent.changedTouches[0].pageY\n\t\t};\n\n\t\tvar touchDirection;\n\t\tvar touchH = touchPos[1].x - touchPos[0].x;\n\t\tvar touchV = touchPos[1].y - touchPos[0].y;\n\t\tif (touchV > 0 && Math.abs(touchV / touchH) > 1) {\n\t\t\ttouchDirection = 40;\n\t\t}\n\t\tif (touchV < 0 && Math.abs(touchV / touchH) > 1) {\n\t\t\ttouchDirection = 38;\n\t\t}\n\t\tif (touchH > 0 && Math.abs(touchV / touchH) < 1) {\n\t\t\ttouchDirection = 39;\n\t\t}\n\t\tif (touchH < 0 && Math.abs(touchV / touchH) < 1) {\n\t\t\ttouchDirection = 37;\n\t\t}\n\n\t\tthis.moveBlock(touchDirection);\n\t}\n});\n\nmodule.exports = MainView;\n\n//\tfunction adaptToMobile() {\n//\t\tvar touchPos = new Array;\n//\t\t$(\".main-body\").on(\"touchstart\", function (evt) {\n//\t\t\tevt.preventDefault();\n//\n//\t\t\ttouchPos[0] = {\n//\t\t\t\t\"x\": evt.originalEvent.touches[0].pageX,\n//\t\t\t\t\"y\": evt.originalEvent.touches[0].pageY\n//\t\t\t};\n//\t\t});\n//\t\t$(\".main-body\").on(\"touchend\", function (evt) {\n//\t\t\tevt.preventDefault();\n//\t\t\ttouchPos[1] = {\n//\t\t\t\t\"x\": evt.originalEvent.changedTouches[0].pageX,\n//\t\t\t\t\"y\": evt.originalEvent.changedTouches[0].pageY\n//\t\t\t};\n//\t\t\tvar touchDirection;\n//\t\t\tvar touchH = touchPos[1].x - touchPos[0].x;\n//\t\t\tvar touchV = touchPos[1].y - touchPos[0].y;\n//\t\t\tif (touchV > 0 && Math.abs(touchV / touchH) > 1) {\n//\t\t\t\ttouchDirection = 40;\n//\t\t\t}\n//\t\t\tif (touchV < 0 && Math.abs(touchV / touchH) > 1) {\n//\t\t\t\ttouchDirection = 38;\n//\t\t\t}\n//\t\t\t;\n//\t\t\tif (touchH > 0 && Math.abs(touchV / touchH) < 1) {\n//\t\t\t\ttouchDirection = 39;\n//\t\t\t}\n//\t\t\tif (touchH < 0 && Math.abs(touchV / touchH) < 1) {\n//\t\t\t\ttouchDirection = 37;\n//\t\t\t}\n//\t\t\t;\n//\t\t\tswitch (touchDirection) {\n//\t\t\t\tcase 37:\n//\t\t\t\t{\n//\t\t\t\t\tmoveLeft();\n//\t\t\t\t\tif (isGameOver()) {\n//\t\t\t\t\t\t$(\".main-body .mask\").css(\"display\", \"block\");\n//\t\t\t\t\t}\n//\t\t\t\t\tbreak;\n//\t\t\t\t}\n//\t\t\t\tcase 38:\n//\t\t\t\t{\n//\t\t\t\t\tmoveUp();\n//\t\t\t\t\tif (isGameOver()) {\n//\t\t\t\t\t\t$(\".main-body .mask\").css(\"display\", \"block\");\n//\t\t\t\t\t}\n//\t\t\t\t\tbreak;\n//\t\t\t\t}\n//\t\t\t\tcase 39:\n//\t\t\t\t{\n//\t\t\t\t\tmoveRight();\n//\t\t\t\t\tif (isGameOver()) {\n//\t\t\t\t\t\t$(\".main-body .mask\").css(\"display\", \"block\");\n//\t\t\t\t\t}\n//\t\t\t\t\tbreak;\n//\t\t\t\t}\n//\n//\t\t\t\tcase 40:\n//\t\t\t\t{\n//\t\t\t\t\tmoveDown();\n//\t\t\t\t\tif (isGameOver()) {\n//\t\t\t\t\t\t$(\".main-body .mask\").css(\"display\", \"block\");\n//\t\t\t\t\t}\n//\t\t\t\t\tbreak;\n//\t\t\t\t}\n//\t\t\t\tdefault:\n//\t\t\t\t\tbreak;\n//\t\t\t}\n//\n//\t\t});\n//\t}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/module/main/mainView.js\n ** module id = 13\n ** module chunks = 1\n **/","module.exports = function (obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<h2 class=\"title\">定制版2048游戏</h2>\\n<p>开始游戏，请选择合适的角色</p>\\n<a href=\"#/it\" class=\"start-btn\">IT民工</a>\\n<a href=\"#/arch\" class=\"start-btn\">建筑师</a>\\n<a href=\"#/other\" class=\"start-btn\">打酱油</a>\\n';\n\n}\nreturn __p\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/module/start/start.ejs\n ** module id = 14\n ** module chunks = 1\n **/","module.exports = function (obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"pull-left\">\\n    <h2 class=\"title\">' +\n((__t = ( title )) == null ? '' : __t) +\n'</h2>\\n    <button class=\"start-btn\">重新开始</button>\\n    <a href=\"#/\" class=\"role-btn\">重选角色</a>\\n</div>\\n<div class=\"pull-right\">\\n    <div class=\"score-count\">\\n        <div class=\"score\">\\n            得分<span class=\"score-num\">' +\n((__t = ( score )) == null ? '' : __t) +\n'</span>\\n        </div>\\n        <div class=\"score\">\\n            最高<span class=\"score-highest\">' +\n((__t = ( highestScore )) == null ? '' : __t) +\n'</span>\\n        </div>\\n    </div>\\n</div>';\n\n}\nreturn __p\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/module/header/header.ejs\n ** module id = 15\n ** module chunks = 1\n **/","var Backbone = require('backbone');\n\nvar GridModel = Backbone.Model.extend({\n\tdefaults: {\n\t\t// 用来计算得分和处理与 text 映射关系\n\t\tnum      : 2,\n\n\t\t// grid 显示的名称\n\t\ttext     : \"\",\n\n\t\t// grid 在二维数组的位置\n\t\tblockPos : {\n\t\t\txPos: 0,\n\t\t\tyPos: 0\n\t\t},\n\n\t\t// grid 渲染位置\n\t\tlayoutPos: {\n\t\t\ttop : 0,\n\t\t\tleft: 0\n\t\t}\n\t}\n});\n\nmodule.exports = GridModel;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/module/grid/gridModel.js\n ** module id = 16\n ** module chunks = 1\n **/","module.exports = function (obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<ul class=\"grids-layout\">\\n    <li class=\"grid-cell\"></li>\\n    <li class=\"grid-cell\"></li>\\n    <li class=\"grid-cell\"></li>\\n    <li class=\"grid-cell\"></li>\\n    <li class=\"grid-cell\"></li>\\n    <li class=\"grid-cell\"></li>\\n    <li class=\"grid-cell\"></li>\\n    <li class=\"grid-cell\"></li>\\n    <li class=\"grid-cell\"></li>\\n    <li class=\"grid-cell\"></li>\\n    <li class=\"grid-cell\"></li>\\n    <li class=\"grid-cell\"></li>\\n    <li class=\"grid-cell\"></li>\\n    <li class=\"grid-cell\"></li>\\n    <li class=\"grid-cell\"></li>\\n    <li class=\"grid-cell\"></li>\\n</ul>';\n\n}\nreturn __p\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/module/main/main.ejs\n ** module id = 17\n ** module chunks = 1\n **/","var Backbone = require('backbone');\nvar gridTpl = require('./grid.ejs');\nvar _ = require('underscore');\n\nvar GridView = Backbone.View.extend({\n\ttemplate: gridTpl,\n\n\tinitialize: function () {\n\t\tthis.listenTo(this.model, {\n\t\t\t'change:layoutPos': this.moveBlock,\n\t\t\t'remove'          : this.clear\n\t\t});\n\n\t\tthis.render();\n\t\tthis.$('.block').addClass('animation-show');\n\t},\n\n\trender: function () {\n\t\tthis.$el\n\t\t\t\t.html(this.template(this.model.toJSON()))\n\t\t\t\t.find('.block')\n\t\t\t\t.addClass(arguments[0]) // 当需要添加 animation-bump class\n\t\t\t\t.removeClass('animation-show');\n\t\treturn this;\n\t},\n\n\tmoveBlock: function (model) {\n\n\t\t// 计算模块可移动距离\n\t\tvar newPos = model.get('layoutPos');\n\t\tvar oldPos = model.previous('layoutPos');\n\t\tvar distanceY = parseInt(newPos.top) - parseInt(oldPos.top);\n\t\tvar distanceX = parseInt(newPos.left) - parseInt(oldPos.left);\n\n\t\t// 添加移动动画\n\t\tthis.$('.block').animate({\n\t\t\ttop : '+=' + distanceY + 'px',\n\t\t\tleft: '+=' + distanceX + 'px'\n\t\t}, 150);\n\n\t\t// 添加 grids 碰撞动画效果\n\t\tvar showBump = function () {\n\t\t\tif (model.hasChanged('num')) {\n\t\t\t\tthis.render('animation-bump');\n\t\t\t}\n\t\t};\n\t\tshowBump = _.bind(showBump, this);\n\t\tsetTimeout(showBump, 100);\n\t},\n\n\tclear: function () {\n\t\tvar that = this;\n\t\tvar clearEl = function () {\n\t\t\tthat.remove();\n\t\t};\n\t\tsetTimeout(clearEl, 100);\n\t}\n});\n\nmodule.exports = GridView;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/module/grid/gridView.js\n ** module id = 18\n ** module chunks = 1\n **/","var Backbone = require('backbone');\nvar gameOverTpl = require('./gameOver.ejs');\n\nvar GameOverView = Backbone.View.extend({\n\tclassName: 'mask game-over-mask',\n\ttemplate : gameOverTpl,\n\n\tevents: {\n\t\t'click .start-btn': 'resetView',\n\t\t'click .role-btn' : 'hideMask'\n\t},\n\n\tinitialize: function () {\n\t\tthis.render();\n\t},\n\n\trender: function () {\n\t\tthis.$el.html(this.template());\n\t\treturn this;\n\t},\n\n\tresetView: function () {\n\n\t\t// 重置当前游戏角色视图\n\t\tGAME_APP[GAME_APP.ROLE + 'GridsCollection'].reset();\n\t\tGAME_APP[GAME_APP.ROLE + 'HeaderModel'].resetScore();\n\n\t\tthis.$el.hide();\n\t},\n\n\thideMask: function () {\n\t\tthis.$el.hide();\n\t}\n});\n\nmodule.exports = GameOverView;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/module/game_over/gameOverView.js\n ** module id = 19\n ** module chunks = 1\n **/","module.exports = function (obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<li class=\"block block-' +\n((__t = ( num )) == null ? '' : __t) +\n'\" style=\"top:' +\n((__t = ( layoutPos.top )) == null ? '' : __t) +\n'; left:' +\n((__t = ( layoutPos.left )) == null ? '' : __t) +\n'\">' +\n((__t = ( text)) == null ? '' : __t) +\n'</li>';\n\n}\nreturn __p\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/module/grid/grid.ejs\n ** module id = 20\n ** module chunks = 1\n **/","module.exports = function (obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<h2 class=\"title\">游戏结束</h2>\\n<button class=\"start-btn\">再玩一次</button>\\n<a href=\"#/\" class=\"role-btn\">重选角色</a>';\n\n}\nreturn __p\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/module/game_over/gameOver.ejs\n ** module id = 21\n ** module chunks = 1\n **/"],"sourceRoot":""}